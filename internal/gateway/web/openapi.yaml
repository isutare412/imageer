openapi: '3.0.4'
info:
  title: Imageer Gateway
  version: '0.1'
  description: |-
    Imageer Gateway API for managing image resources.

servers:
  - url: /
    description: Current server

security:
  - bearerAuth: []
  - apiKeyAuth: []
  - cookieAuth: []

tags:
  - name: Authentication
  - name: Project
  - name: Image
  - name: Admin

paths:
  /api/v1/admin/projects:
    get:
      operationId: listProjectsAdmin
      summary: List all projects
      tags:
        - Admin
      parameters:
        # Pagination parameters
        - $ref: '#/components/parameters/OffsetQuery'
        - $ref: '#/components/parameters/LimitQuery'
      responses:
        '200':
          description: Successfully retrieved projects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Projects'
        default:
          $ref: '#/components/responses/ErrorResponse'

    post:
      operationId: createProjectAdmin
      summary: Create a new project
      tags:
        - Admin
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProjectAdminRequest'
      responses:
        '200':
          description: Successfully created project
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/admin/projects/{projectId}:
    get:
      operationId: getProjectAdmin
      summary: Get project details
      tags:
        - Admin
      parameters:
        - $ref: '#/components/parameters/ProjectIdPath'
      responses:
        '200':
          description: Successfully retrieved project details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        default:
          $ref: '#/components/responses/ErrorResponse'

    put:
      operationId: updateProjectAdmin
      summary: Update project details
      tags:
        - Admin
      parameters:
        - $ref: '#/components/parameters/ProjectIdPath'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProjectAdminRequest'
      responses:
        '200':
          description: Successfully updated project details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        default:
          $ref: '#/components/responses/ErrorResponse'

    delete:
      operationId: deleteProjectAdmin
      summary: Delete a project
      tags:
        - Admin
      parameters:
        - $ref: '#/components/parameters/ProjectIdPath'
      responses:
        '200':
          description: Successfully deleted project
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/admin/projects/{projectId}/images/reprocess:
    post:
      operationId: reprocessImagesAdmin
      summary: Reprocess multiple images in a project
      tags:
        - Admin
      parameters:
        - $ref: '#/components/parameters/ProjectIdPath'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReprocessImagesAdminRequest'
      responses:
        '200':
          description: Successfully triggered batch image reprocessing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Images'
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/admin/service-accounts:
    get:
      operationId: listServiceAccountsAdmin
      summary: List service accounts
      tags:
        - Admin
      parameters:
        # Pagination parameters
        - $ref: '#/components/parameters/OffsetQuery'
        - $ref: '#/components/parameters/LimitQuery'
      responses:
        '200':
          description: Successfully retrieved service accounts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceAccounts'
        default:
          $ref: '#/components/responses/ErrorResponse'

    post:
      operationId: createServiceAccountAdmin
      summary: Create a new service account
      tags:
        - Admin
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateServiceAccountAdminRequest'
      responses:
        '200':
          description: Successfully created service account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceAccountWithApiKey'
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/admin/service-accounts/{serviceAccountId}:
    get:
      operationId: getServiceAccountAdmin
      summary: Get service account details
      tags:
        - Admin
      parameters:
        - $ref: '#/components/parameters/ServiceAccountIdPath'
      responses:
        '200':
          description: Successfully retrieved service account details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceAccount'
        default:
          $ref: '#/components/responses/ErrorResponse'

    put:
      operationId: updateServiceAccountAdmin
      summary: Update a service account
      tags:
        - Admin
      parameters:
        - $ref: '#/components/parameters/ServiceAccountIdPath'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateServiceAccountAdminRequest'
      responses:
        '200':
          description: Successfully updated service account
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceAccount'
        default:
          $ref: '#/components/responses/ErrorResponse'

    delete:
      operationId: deleteServiceAccountAdmin
      summary: Delete a service account
      tags:
        - Admin
      parameters:
        - $ref: '#/components/parameters/ServiceAccountIdPath'
      responses:
        '200':
          description: Successfully deleted service account
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/users/me:
    get:
      operationId: getCurrentUser
      summary: Get current user details
      tags:
        - Authentication
      responses:
        '200':
          description: Successfully retrieved current user details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/auth/google/sign-in:
    get:
      operationId: startGoogleSignIn
      summary: Start Google Sign-In
      security: []
      tags:
        - Authentication
      parameters:
        - $ref: '#/components/parameters/RedirectQuery'
      responses:
        '302':
          description: Redirecting to Google Sign-In
          headers:
            Location:
              description: The URL to redirect the user to for Google Sign-In
              schema:
                type: string
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/auth/google/sign-in/callback:
    get:
      operationId: finishGoogleSignIn
      summary: Finish Google Sign-In
      security: []
      tags:
        - Authentication
      parameters:
        - name: code
          in: query
          required: true
          description: The authorization code returned by Google after sign-in.
          schema:
            type: string
        - name: state
          in: query
          required: true
          description: The state parameter to prevent CSRF attacks.
          schema:
            type: string
      responses:
        '302':
          description: Successfully signed in with Google
          headers:
            Location:
              description: The URL to redirect the user to after signing in
              schema:
                type: string
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/auth/sign-out:
    post:
      operationId: signOut
      summary: Sign out the current user
      tags:
        - Authentication
      responses:
        '200':
          description: Successfully signed out
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/projects/{projectId}:
    get:
      operationId: getProject
      summary: Get project details
      tags:
        - Project
      parameters:
        - $ref: '#/components/parameters/ProjectIdPath'
      responses:
        '200':
          description: Successfully retrieved project details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/projects/{projectId}/images/upload-url:
    post:
      operationId: createUploadUrl
      summary: Issue a presigned URL for uploading an image
      tags:
        - Image
      parameters:
        - $ref: '#/components/parameters/ProjectIdPath'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUploadUrlRequest'
      responses:
        '200':
          description: Successfully issued the presigned URL
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadUrl'
        default:
          $ref: '#/components/responses/ErrorResponse'

  /api/v1/projects/{projectId}/images/{imageId}:
    get:
      operationId: getImage
      summary: Get image details
      tags:
        - Image
      parameters:
        - $ref: '#/components/parameters/ProjectIdPath'
        - $ref: '#/components/parameters/ImageIdPath'
        - $ref: '#/components/parameters/WaitUntilProcessedQuery'
      responses:
        '200':
          description: Successfully retrieved image details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Image'
        default:
          $ref: '#/components/responses/ErrorResponse'

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: USER
    apiKeyAuth:
      type: apiKey
      in: header
      name: X-API-KEY
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    ###
    # Path Parameters
    ###
    ProjectIdPath:
      name: projectId
      in: path
      required: true
      description: The ID of the project to which the image belongs.
      schema:
        type: string
        example: 426e634f-50dd-41a0-881b-c991441b3cd5

    ServiceAccountIdPath:
      name: serviceAccountId
      in: path
      required: true
      description: The ID of the service account.
      schema:
        type: string
        example: 426e634f-50dd-41a0-881b-c991441b3cd5

    ImageIdPath:
      name: imageId
      in: path
      required: true
      description: The ID of the image.
      schema:
        type: string
        example: 426e634f-50dd-41a0-881b-c991441b3cd5

    ###
    # Query Parameters
    ###
    OffsetQuery:
      name: offset
      in: query
      description: Offset for pagination
      schema:
        type: integer
        format: int64
        example: 0

    LimitQuery:
      name: limit
      in: query
      description: Limit for pagination
      schema:
        type: integer
        format: int64
        example: 10

    WaitUntilProcessedQuery:
      name: waitUntilProcessed
      in: query
      description: Wait until the image processing is completed
      schema:
        type: boolean
        default: false
        example: false

    RedirectQuery:
      name: redirect
      in: query
      description: The path to redirect to after successful sign-in. Defaults to root path if not provided.
      schema:
        type: string
        example: /projects

  responses:
    ###
    # Error Responses
    ###
    ErrorResponse:
      description: Error occurred during the request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AppError'

  schemas:
    ###
    # Enums
    ###
    ImageState:
      type: string
      enum:
        - UPLOAD_PENDING
        - UPLOAD_EXPIRED
        - READY
        - FAILED
      description: The current state of the image.
      example: READY
      x-go-type: images.State
      x-go-import:
        path: github.com/isutare412/imageer/pkg/images

    ImageVariantState:
      type: string
      enum:
        - UPLOAD_PENDING
        - UPLOAD_EXPIRED
        - PROCESSING
        - READY
        - FAILED
      description: The current state of the image variant.
      example: READY
      x-go-type: images.VariantState
      x-go-import:
        path: github.com/isutare412/imageer/pkg/images

    ImageFormat:
      type: string
      enum:
        - JPEG
        - PNG
        - WEBP
        - AVIF
        - HEIC
      description: The content type of the image.
      example: WEBP
      x-go-type: images.Format
      x-go-import:
        path: github.com/isutare412/imageer/pkg/images

    ImageFit:
      type: string
      enum:
        - COVER
        - CONTAIN
        - FILL
      description: |
        The fit mode for image conversion:
          - COVER: Scale the image to cover the target dimensions. Some parts may be cropped.
          - CONTAIN: Scale the image to fit within the target dimensions. No cropping occurs. Empty areas may be filled with background color.
          - FILL: Scale the image to fill the target dimensions. The image may be distorted.
      example: CONTAIN
      x-go-type: images.Fit
      x-go-import:
        path: github.com/isutare412/imageer/pkg/images

    ImageAnchor:
      type: string
      enum:
        - SMART
        - CENTER
        - NORTH
        - EAST
        - SOUTH
        - WEST
      description: The anchor position for image cropping.
      example: SMART
      x-go-type: images.Anchor
      x-go-import:
        path: github.com/isutare412/imageer/pkg/images

    UserRole:
      type: string
      enum:
        - ADMIN
        - GUEST
      description: The role of the user.
      example: GUEST
      x-go-type: users.Role
      x-go-type-import:
        path: github.com/isutare412/imageer/pkg/users

    ServiceAccountAccessScope:
      type: string
      enum:
        - FULL
        - PROJECT
      description: The access scope of the service account.
      example: PROJECT
      x-go-type: serviceaccounts.AccessScope
      x-go-type-import:
        path: github.com/isutare412/imageer/pkg/serviceaccounts

    ###
    # Request Schemas
    ###
    CreateProjectAdminRequest:
      type: object
      properties:
        name:
          type: string
          description: The name of the project.
          example: test-project
        presets:
          type: array
          items:
            $ref: '#/components/schemas/CreatePresetRequest'
          x-go-type-skip-optional-pointer: true
      required:
        - name

    UpdateProjectAdminRequest:
      type: object
      properties:
        name:
          type: string
          description: The name of the project.
          example: test-project
        presets:
          type: array
          items:
            $ref: '#/components/schemas/UpsertPresetRequest'
          x-go-type-skip-optional-pointer: true

    CreateServiceAccountAdminRequest:
      type: object
      properties:
        name:
          type: string
          description: The name of the service account.
          example: test-service-account
        accessScope:
          $ref: '#/components/schemas/ServiceAccountAccessScope'
        projectIds:
          type: array
          description: List of project IDs to associate with the service account.
          items:
            type: string
            example: 426e634f-50dd-41a0-881b-c991441b3cd5
          x-go-name: ProjectIDs
          x-go-type-skip-optional-pointer: true
        expireAt:
          type: string
          format: date-time
          description: The expiration time of the service account token.
          example: '2023-10-01T12:00:00Z'
      required:
        - name
        - accessScope

    UpdateServiceAccountAdminRequest:
      type: object
      properties:
        name:
          type: string
          description: The name of the service account.
          example: test-service-account
        accessScope:
          $ref: '#/components/schemas/ServiceAccountAccessScope'
        projectIds:
          type: array
          description: List of project IDs to associate with the service account.
          items:
            type: string
            example: 426e634f-50dd-41a0-881b-c991441b3cd5
          x-go-name: ProjectIDs
          x-go-type-skip-optional-pointer: true
        expireAt:
          type: string
          format: date-time
          description: The expiration time of the service account token.
          example: '2023-10-01T12:00:00Z'

    CreateUploadUrlRequest:
      type: object
      properties:
        fileName:
          type: string
          description: The name of the file to be uploaded.
          example: image.jpg
        format:
          $ref: '#/components/schemas/ImageFormat'
        presetNames:
          type: array
          description: >-
            List of preset names to apply to the image. If not provided,
            default presets will be applied.
          items:
            type: string
            example: w600h800
          x-go-type-skip-optional-pointer: true
      required:
        - fileName
        - format

    ReprocessImagesAdminRequest:
      type: object
      properties:
        imageIds:
          type: array
          description: >-
            List of image IDs to reprocess. If not provided and reprocessAll is true,
            all images in the project will be reprocessed.
          items:
            type: string
            example: 426e634f-50dd-41a0-881b-c991441b3cd5
          x-go-type-skip-optional-pointer: true
          x-go-name: ImageIDs
          example:
            - 426e634f-50dd-41a0-881b-c991441b3cd5
            - 123e4567-e89b-12d3-a456-426614174000
        reprocessAll:
          type: boolean
          description: If true, reprocess all images in the project. Takes precedence over imageIds.
          default: false
          example: false
          x-go-type-skip-optional-pointer: true

    CreatePresetRequest:
      type: object
      properties:
        name:
          type: string
          description: The name of the preset.
          example: w600h800
        default:
          type: boolean
          description: Indicates if this preset is the default one.
          example: false
        format:
          $ref: '#/components/schemas/ImageFormat'
        quality:
          type: integer
          format: int64
          description: The quality of the image (1-100). Default is 80.
          example: 90
        fit:
          $ref: '#/components/schemas/ImageFit'
        anchor:
          $ref: '#/components/schemas/ImageAnchor'
        width:
          type: integer
          format: int64
          description: The width of the image in pixels.
          example: 600
        height:
          type: integer
          format: int64
          description: The height of the image in pixels.
          example: 800
      required:
        - name
        - default

    UpsertPresetRequest:
      type: object
      description: |
        If id is provided, the preset will be updated; otherwise, a new preset
        will be created. All existing presets not included in the upsert list
        will be deleted.
      properties:
        id:
          type: string
          description: The unique identifier of the preset.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        name:
          type: string
          description: The name of the preset.
          example: w600h800
        default:
          type: boolean
          description: Indicates if this preset is the default one.
          example: false
        format:
          $ref: '#/components/schemas/ImageFormat'
        quality:
          type: integer
          format: int64
          description: The quality of the image (1-100). Default is 80.
          example: 90
        fit:
          $ref: '#/components/schemas/ImageFit'
        anchor:
          $ref: '#/components/schemas/ImageAnchor'
        width:
          type: integer
          format: int64
          description: The width of the image in pixels.
          example: 600
        height:
          type: integer
          format: int64
          description: The height of the image in pixels.
          example: 800

    ###
    # Response Schemas
    ###
    AppError:
      type: object
      properties:
        message:
          type: string
          example: Some complex error message
          description: Error message
        codeId:
          type: integer
          format: int64
          example: 1000
          description: Error code ID for programmatic handling
        codeName:
          type: string
          example: BAD_REQUEST
          description: Error code name for programmatic handling
      required:
        - message
        - codeId
        - codeName

    Project:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the project.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        createdAt:
          type: string
          format: date-time
          description: The creation time of the project.
          example: '2023-10-01T12:00:00Z'
        updatedAt:
          type: string
          format: date-time
          description: The last update time of the project.
          example: '2023-10-01T12:00:00Z'
        name:
          type: string
          description: The name of the project.
          example: test-project
        presets:
          type: array
          description: List of presets to apply to images of the project.
          items:
            $ref: '#/components/schemas/Preset'
        imageCount:
          type: integer
          format: int64
          description: The total number of images in the project.
          example: 42
      required:
        - id
        - createdAt
        - updatedAt
        - name
        - presets
        - imageCount

    Projects:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Project'
        total:
          type: integer
          format: int64
          description: The total number of projects.
          example: 100
      required:
        - items
        - total

    Preset:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the preset.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        createdAt:
          type: string
          format: date-time
          description: The creation time of the preset.
          example: '2023-10-01T12:00:00Z'
        updatedAt:
          type: string
          format: date-time
          description: The last update time of the preset.
          example: '2023-10-01T12:00:00Z'
        name:
          type: string
          description: The name of the preset.
          example: w600h800
        default:
          type: boolean
          description: Indicates if this preset is the default one.
          example: false
        format:
          $ref: '#/components/schemas/ImageFormat'
        quality:
          type: integer
          format: int64
          description: The quality of the image (1-100).
          example: 90
        fit:
          $ref: '#/components/schemas/ImageFit'
        anchor:
          $ref: '#/components/schemas/ImageAnchor'
        width:
          type: integer
          format: int64
          description: The width of the image in pixels.
          example: 600
        height:
          type: integer
          format: int64
          description: The height of the image in pixels.
          example: 800
      required:
        - id
        - createdAt
        - updatedAt
        - name
        - default
        - format
        - quality

    UploadUrl:
      type: object
      properties:
        imageId:
          type: string
          description: The unique identifier of the image.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        url:
          type: string
          description: >-
            The presigned URL for uploading the image. It must be called with PUT method.
            Check https://docs.aws.amazon.com/AmazonS3/latest/userguide/PresignedUrlUploadObject.html
            for more details.
          example: https://aws.com/upload?key=abc123
        header:
          type: object
          description: Additional headers required for the upload request.
          additionalProperties:
            type: string
          example:
            Host: foo.s3.amazonaws.com
        expiresAt:
          type: string
          format: date-time
          description: The expiration time of the presigned URL.
          example: '2023-10-01T12:00:00Z'
      required:
        - imageId
        - url
        - header
        - expiresAt

    Image:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the image.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        createdAt:
          type: string
          format: date-time
          description: The creation time of the image.
          example: '2023-10-01T12:00:00Z'
        updatedAt:
          type: string
          format: date-time
          description: The last update time of the image.
          example: '2023-10-01T12:00:00Z'
        state:
          $ref: '#/components/schemas/ImageState'
        url:
          type: string
          description: The URL of the original image.
          example: https://example.com/original/image.webp
        format:
          $ref: '#/components/schemas/ImageFormat'
        variants:
          type: array
          description: List of image variants with applied presets.
          items:
            $ref: '#/components/schemas/ImageVariant'
          x-go-type-skip-optional-pointer: true
      required:
        - id
        - createdAt
        - updatedAt
        - state
        - url
        - format

    Images:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Image'
        total:
          type: integer
          format: int64
          description: The total number of images.
          example: 100
      required:
        - items
        - total

    ImageVariant:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the image variant.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        createdAt:
          type: string
          format: date-time
          description: The creation time of the image variant.
          example: '2023-10-01T12:00:00Z'
        updatedAt:
          type: string
          format: date-time
          description: The time when the image variant was updated.
          example: '2023-10-01T12:00:00Z'
        presetId:
          type: string
          description: The unique identifier of the preset.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        presetName:
          type: string
          description: The name of the preset.
          example: w600h800
        state:
          $ref: '#/components/schemas/ImageVariantState'
        url:
          type: string
          description: The URL of the image with the applied preset.
          example: https://example.com/presets/w600h800/image.webp
        format:
          $ref: '#/components/schemas/ImageFormat'
      required:
        - id
        - createdAt
        - updatedAt
        - presetId
        - presetName
        - state
        - url
        - format

    ServiceAccount:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the service account.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        createdAt:
          type: string
          format: date-time
          description: The creation time of the service account.
          example: '2023-10-01T12:00:00Z'
        updatedAt:
          type: string
          format: date-time
          description: The last update time of the service account.
          example: '2023-10-01T12:00:00Z'
        expireAt:
          type: string
          format: date-time
          description: The expiration time of the service account token.
          example: '2023-10-01T12:00:00Z'
        name:
          type: string
          description: The name of the service account.
          example: test-service-account
        accessScope:
          $ref: '#/components/schemas/ServiceAccountAccessScope'
        projects:
          type: array
          description: List of projects associated with the service account.
          items:
            $ref: '#/components/schemas/ProjectReference'
      required:
        - id
        - createdAt
        - updatedAt
        - name
        - accessScope
        - projects

    ServiceAccountWithApiKey:
      allOf:
        - $ref: '#/components/schemas/ServiceAccount'
        - type: object
          properties:
            apiKey:
              type: string
              description: The API key for the service account.
              example: ak_SOEXTZL3Ww7BXyqMWdD5QpPfyPF5nXTy14PkpV9X6vySOzmQdpjHYXK26vbhDgDj
          required:
            - apiKey

    ServiceAccounts:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ServiceAccount'
        total:
          type: integer
          format: int64
          description: The total number of service accounts.
          example: 100
      required:
        - items
        - total

    ProjectReference:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the project.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        name:
          type: string
          description: The name of the project.
          example: test-project
      required:
        - id
        - name

    User:
      type: object
      properties:
        id:
          type: string
          description: The unique identifier of the user.
          example: 426e634f-50dd-41a0-881b-c991441b3cd5
        nickname:
          type: string
          description: The nickname of the user.
          example: johndoe
        role:
          $ref: '#/components/schemas/UserRole'
        email:
          type: string
          description: The email address of the user.
          example: user@example.com
        photoUrl:
          type: string
          format: uri
          description: The photo URL of the user.
          example: https://example.com/photos/user.webp
        createdAt:
          type: string
          format: date-time
          description: The creation time of the user.
          example: '2023-10-01T12:00:00Z'
        updatedAt:
          type: string
          format: date-time
          description: The last update time of the user.
          example: '2023-10-01T12:00:00Z'
      required:
        - id
        - nickname
        - role
        - email
        - photoUrl
        - createdAt
        - updatedAt